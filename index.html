<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Cerminan Guts</title>

  <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    * {
      font-family: 'Source Sans Pro', sans-serif;
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background-image: url('https://i.imgur.com/Pc6bzRO.jpeg');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      background-attachment: fixed;
      min-height: 100vh;
      padding: 40px 20px;
      color: #000;
      display: flex;
      justify-content: center;
      align-items: flex-start;
    }

    .container {
      background: rgba(255, 255, 255, 0.92);
      border-radius: 16px;
      padding: 40px;
      max-width: 700px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      text-align: center;
    }

    h1 {
      font-size: 2.4em;
      margin-bottom: 10px;
    }

    p {
      font-size: 1.1em;
      line-height: 1.6;
      margin-bottom: 20px;
    }

    textarea {
      width: 100%;
      border-radius: 10px;
      padding: 14px;
      border: 1px solid #ccc;
      resize: vertical;
      font-size: 1em;
      background-color: #fefefe;
      box-shadow: inset 0 2px 4px rgba(0,0,0,0.05);
      margin-bottom: 20px;
    }

    button {
      padding: 12px 24px;
      background-color: #333;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1em;
      margin: 10px;
      transition: background 0.3s ease;
    }

    button:hover {
      background-color: #000;
    }

    .fade-in {
      opacity: 0;
      animation: fadeIn 1.2s ease-in-out forwards;
    }

    @keyframes fadeIn {
      to {
        opacity: 1;
      }
    }

    .riwayat {
      text-align: left;
      margin-top: 30px;
      background: #f9f9f9;
      padding: 20px;
      border-radius: 12px;
      max-height: 300px;
      overflow-y: auto;
    }

    .riwayat-item {
      margin-bottom: 16px;
      padding-bottom: 10px;
      border-bottom: 1px solid #ddd;
    }

    .riwayat-item:last-child {
      border-bottom: none;
    }

    .riwayat-item strong {
      display: block;
      margin-bottom: 4px;
    }
  </style>
</head>
<body>
  <div class="container fade-in">
    <h1>Cerminan Guts</h1>
    <p>
      Selamat datang di <strong>Cerminan Guts</strong>. Jawablah pertanyaan di bawah ini dengan jujur dan tanpa pretensi. Gunakan ini sebagai
      kompas moral pribadimu di era digital. <em><a href="#" onclick="location.reload()" style="color: #1e90ff; text-decoration: underline; cursor: pointer;">Refresh</a></em> halaman untuk pertanyaan baru.
      <em>"Jawablah tanpa harapan untuk disukai siapa pun."</em>
    </p>

    <h2 id="pertanyaan"></h2>
    <textarea id="jawaban" rows="6" placeholder="Tuliskan jawabanmu di sini..."></textarea>

    <div style="text-align: center; margin-top: 10px;">
      <button id="saveBtn" onclick="simpanRefleksi()" disabled>Simpan Refleksi</button>
      <button onclick="lihatRiwayat()">Cek Riwayat</button>
    </div>

    <div style="margin-top: 30px;">
      <button onclick="toggleMusik()" id="musikBtn">Putar Musik</button>
      <audio id="musikPlayer" loop>
        <source src="clairdelune.mp3" type="audio/mpeg" />
        Browser tidak mendukung audio.
      </audio>
    </div>

    <div id="riwayatContainer" class="riwayat" style="display: none;"></div>
  </div>

  <script>
    const pertanyaanList = [
      "Apa prinsip moral terpenting bagimu?",
      "Pernahkah kamu mengikuti sesuatu yang kamu tahu salah hanya karena tekanan sosial?",
      "Bagaimana kamu menanggapi kritik di internet?",
      "Apa satu hal yang kamu sesali dalam berinteraksi digital?",
      // Tambah hingga 100...
    ];

    const pertanyaanElemen = document.getElementById("pertanyaan");
    const jawabanInput = document.getElementById("jawaban");
    const saveBtn = document.getElementById("saveBtn");
    const riwayatContainer = document.getElementById("riwayatContainer");

    function tampilkanPertanyaan() {
      const acak = Math.floor(Math.random() * pertanyaanList.length);
      pertanyaanElemen.innerText = pertanyaanList[acak];
    }

    tampilkanPertanyaan();

    jawabanInput.addEventListener("input", () => {
      saveBtn.disabled = jawabanInput.value.trim() === "";
    });

    function simpanRefleksi() {
      const pertanyaan = pertanyaanElemen.innerText.trim();
      const jawaban = jawabanInput.value.trim();
      const waktu = new Date().toLocaleString();

      const refleksi = { pertanyaan, jawaban, waktu };

      let data = JSON.parse(localStorage.getItem("refleksiGuts") || "[]");
      data.push(refleksi);
      localStorage.setItem("refleksiGuts", JSON.stringify(data));

      alert("Refleksi berhasil disimpan!");
      jawabanInput.value = "";
      saveBtn.disabled = true;
    }

    function lihatRiwayat() {
      const data = JSON.parse(localStorage.getItem("refleksiGuts") || "[]");
      if (data.length === 0) {
        riwayatContainer.style.display = "block";
        riwayatContainer.innerHTML = "<p>Belum ada refleksi tersimpan.</p>";
        return;
      }

      let html = "";
      data.forEach((item, i) => {
        html += `
          <div class="riwayat-item">
            <strong>${i + 1}. (${item.waktu})</strong>
            <div><em>Pertanyaan:</em> ${item.pertanyaan}</div>
            <div><em>Jawaban:</em> ${item.jawaban}</div>
          </div>
        `;
      });

      riwayatContainer.style.display = "block";
      riwayatContainer.innerHTML = html;
    }

    function toggleMusik() {
      const musik = document.getElementById("musikPlayer");
      const musikBtn = document.getElementById("musikBtn");
      if (musik.paused) {
        musik.play();
        musikBtn.innerText = "Matikan Musik";
      } else {
        musik.pause();
        musikBtn.innerText = "Putar Musik";
      }
    }
  </script>
</body>
</html>
